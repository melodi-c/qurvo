# ==============================================================================
# Global
# ==============================================================================
global:
  imageRegistry: "qurvo.registry.twcstorage.ru"
  imageTag: "latest"
  imagePullPolicy: IfNotPresent
  imagePullSecrets:
    - name: twcr-secret

# ==============================================================================
# Datadog
# ==============================================================================
datadogIntegration:
  enabled: true
  env: "qurvo-prod"

# ==============================================================================
# Domains & TLS
# ==============================================================================
domain:
  app: "app.qurvo.ru"
  ingest: "ingest.qurvo.ru"
  landing: "qurvo.ru"
  storybook: "storybook.app.qurvo.ru"

tls:
  enabled: true
  clusterIssuer: "letsencrypt-prod"

# ==============================================================================
# Ingress
# ==============================================================================
ingress:
  className: "nginx"
  annotations: {}

# ==============================================================================
# Secrets (pass via --set at deploy time)
# ==============================================================================
secrets:
  databaseUrl: ""
  redisUrl: ""
  clickhouseUrl: ""
  clickhouseUser: ""
  clickhousePassword: ""
  openaiApiKey: ""
  smtpUser: ""
  smtpPass: ""

# ==============================================================================
# GeoIP (MaxMind GeoLite2-Country MMDB)
# ==============================================================================
geolite2CountryUrl: "https://cf92270d-b971-4f1a-9fc8-1cde9031d973.selstorage.ru/data/GeoLite2-Country.mmdb"

# ==============================================================================
# AI Assistant (OpenAI-compatible)
# ==============================================================================
openai:
  baseUrl: "https://agent.timeweb.cloud/api/v1/cloud-ai/agents/f9e83f9a-1845-4e4e-85b8-acc7f9605386/v1"
  model: ""

# ==============================================================================
# API
# ==============================================================================
api:
  enabled: true
  image:
    repository: "api"
    tag: ""
  replicas: 2
  port: 3000
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"
  env:
    CORS_ORIGIN: "https://app.qurvo.ru"

# ==============================================================================
# Ingest
# ==============================================================================
ingest:
  enabled: true
  image:
    repository: "ingest"
    tag: ""
  replicas: 2
  port: 3001
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

# ==============================================================================
# Processor
# ==============================================================================
processor:
  enabled: true
  image:
    repository: "processor"
    tag: ""
  replicas: 1
  resources:
    requests:
      cpu: "200m"
      memory: "384Mi"
    limits:
      cpu: "1000m"
      memory: "768Mi"

# ==============================================================================
# Cohort Worker
# ==============================================================================
cohort-worker:
  enabled: true
  image:
    repository: "cohort-worker"
    tag: ""
  replicas: 1
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

# ==============================================================================
# Billing Worker
# ==============================================================================
billing-worker:
  enabled: true
  image:
    repository: "billing-worker"
    tag: ""
  replicas: 1
  resources:
    requests:
      cpu: "50m"
      memory: "128Mi"
    limits:
      cpu: "200m"
      memory: "256Mi"

# ==============================================================================
# Web
# ==============================================================================
web:
  enabled: true
  image:
    repository: "web"
    tag: ""
  replicas: 2
  port: 80
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "200m"
      memory: "128Mi"

# ==============================================================================
# Landing
# ==============================================================================
landing:
  enabled: true
  image:
    repository: "landing"
    tag: ""
  replicas: 1
  port: 80
  resources:
    requests:
      cpu: "20m"
      memory: "32Mi"
    limits:
      cpu: "100m"
      memory: "64Mi"

# ==============================================================================
# Migrations (Helm hooks)
# ==============================================================================
migrations:
  pg:
    enabled: true
  ch:
    enabled: true

# ==============================================================================
# Storybook
# ==============================================================================
storybook:
  enabled: false
  image:
    repository: "storybook"
    tag: ""
  replicas: 1
  resources:
    requests:
      cpu: "20m"
      memory: "32Mi"
    limits:
      cpu: "100m"
      memory: "64Mi"
  basicAuth:
    # REQUIRED when storybook.enabled=true.
    # Must be set in values.local-secrets.yaml (this file is gitignored).
    # Generate with: htpasswd -nb <user> <password>
    # Example entry in values.local-secrets.yaml:
    #   storybook:
    #     basicAuth:
    #       htpasswd: "admin:$apr1$xyz..."
    htpasswd: ""

# ==============================================================================
# ClickHouse (non-secret config)
# ==============================================================================
clickhouse:
  database: "default_db"
